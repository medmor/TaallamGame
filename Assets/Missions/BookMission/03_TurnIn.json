{"inkVersion":21,"root":[["\n",["done",{"#f":5,"#n":"g-0"}],null],"done",{"start":["#","^speaker:أمينة المكتبة ","/#","#","^portrait:librarian_neutral ","/#","#","^layout:right ","/#","#","^audio:animal_crossing_low","/#",["ev",{"f()":"get_mission_status"},"str","^completed","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","^أهلاً! أرى أنك أنجزت مهمة الكتاب بالفعل. أحسنت!","\n","end",{"->":"start.16"},null]}],["ev",{"f()":"get_mission_status"},"str","^ready_to_complete","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","^هل أحضرت كتاب \"ألِف باء\" مكتملاً؟","\n",{"->":"ready_to_complete"},{"->":"start.16"},null]}],["ev",{"f()":"get_mission_status"},"str","^in_progress","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","^هل أحضرت كتاب \"ألِف باء\"؟","\n",{"->":"check_progress"},{"->":"start.16"},null]}],[{"->":".^.b"},{"b":["\n","^أهلاً بك في المكتبة! هل تحتاج المساعدة في العثور على شيء؟","\n",{"->":"no_mission"},{"->":"start.16"},null]}],"nop","\n",{"#f":1}],"ready_to_complete":[["ev","str","^نعم، هذا هو الكتاب مكتملاً","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^ليس بعد","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","ev",{"f()":"complete_book_mission"},"/ev",[{"->":".^.b","c":true},{"b":["\n","#","^speaker:أمينة المكتبة ","/#","#","^portrait:librarian_happy","/#","^أحسنت! لقد جمعت كل الحروف وكونت الكتاب. شكراً لك!","\n","ev",true,"/ev",{"VAR=":"talked_to_librarian","re":true},"end",{"->":".^.^.^.6"},null]}],[{"->":".^.b"},{"b":["\n","#","^speaker:أمينة المكتبة ","/#","#","^portrait:librarian_confused","/#","^هناك خطأ ما... دعني أتحقق مرة أخرى.","\n","end",{"->":".^.^.^.6"},null]}],"nop","\n",{"#f":5}],"c-1":["\n","#","^speaker:أمينة المكتبة ","/#","#","^portrait:librarian_neutral","/#","^لا مشكلة. عد عندما تجمع كل الحروف وتكون الكتاب.","\n","end",{"#f":5}]}],{"#f":1}],"check_progress":[["ev",{"VAR?":"has_letter_k"},{"VAR?":"has_letter_t"},"&&",{"VAR?":"has_letter_a"},"&&",{"VAR?":"has_letter_b"},"&&","/ev",{"->":".^.b","c":true},{"b":["\n","^يبدو أن لديك كل الحروف! الآن يمكنك تكوين الكتاب.","\n",{"->":"ready_to_complete"},{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","^ما زلت بحاجة لجمع بعض الحروف:","\n","ev",{"VAR?":"has_letter_k"},"!","/ev",[{"->":".^.b","c":true},{"b":["^ - الحرف \"ك\" ",{"->":".^.^.^.8"},null]}],"nop","\n","ev",{"VAR?":"has_letter_t"},"!","/ev",[{"->":".^.b","c":true},{"b":["^ - الحرف \"ت\" ",{"->":".^.^.^.15"},null]}],"nop","\n","ev",{"VAR?":"has_letter_a"},"!","/ev",[{"->":".^.b","c":true},{"b":["^ - الحرف \"ا\" ",{"->":".^.^.^.22"},null]}],"nop","\n","ev",{"VAR?":"has_letter_b"},"!","/ev",[{"->":".^.b","c":true},{"b":["^ - الحرف \"ب\" ",{"->":".^.^.^.29"},null]}],"nop","\n","^ابحث في ساحة المدرسة وتحدث مع الأطفال والبائعين.","\n","end",{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"no_mission":[["ev","str","^أبحث عن كتاب للأطفال","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^لا شكراً","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","#","^speaker:أمينة المكتبة ","/#","#","^portrait:librarian_helpful","/#","^ممتاز! لدينا قسم جميل للأطفال. ابحث عن كتاب \"ألِف باء\" - إنه مفيد جداً لتعلم الحروف.","\n","end",{"#f":5}],"c-1":["\n","#","^speaker:أمينة المكتبة ","/#","#","^portrait:librarian_neutral","/#","^حسناً، أتمنى لك يوماً سعيداً!","\n","end",{"#f":5}]}],{"#f":1}],"is_mission_complete":[["ev",{"VAR?":"has_letter_k"},{"VAR?":"has_letter_t"},"&&",{"VAR?":"has_letter_a"},"&&",{"VAR?":"has_letter_b"},"&&","/ev",{"->":".^.b","c":true},{"b":["\n","ev",true,"/ev","~ret",{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","ev",false,"/ev","~ret",{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"can_make_book":[["ev",{"f()":"is_mission_complete"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev",true,"/ev","~ret",{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","ev",false,"/ev","~ret",{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"start_book_mission":["ev",true,"/ev",{"VAR=":"book_mission_started","re":true},"ev",true,"/ev",{"VAR=":"talked_to_teacher","re":true},"ev","str","^book_mission","/str",{"x()":"external_StartMission","exArgs":1},"pop","/ev","\n","ev",{"x()":"external_SaveProgress"},"pop","/ev","\n","ev",{"VAR?":"book_mission_started"},{"x()":"debug_log","exArgs":1},"pop","/ev","\n",{"#f":1}],"complete_book_mission":[["ev",{"f()":"can_make_book"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev",true,"/ev",{"VAR=":"book_mission_completed","re":true},"ev",true,"/ev",{"VAR=":"has_book","re":true},"ev","str","^complete_book","/str",{"x()":"external_GiveItem","exArgs":1},"pop","/ev","\n","ev","str","^book_mission","/str",{"x()":"external_CompleteMission","exArgs":1},"pop","/ev","\n","ev","str","^mission_complete","/str",{"x()":"external_PlaySound","exArgs":1},"pop","/ev","\n","ev",{"x()":"external_SaveProgress"},"pop","/ev","\n","ev","str","^complete_book_mission: completed","/str",{"x()":"debug_log","exArgs":1},"pop","/ev","\n","ev",true,"/ev","~ret",{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","ev","str","^complete_book_mission: cannot complete yet","/str",{"x()":"debug_log","exArgs":1},"pop","/ev","\n","ev",false,"/ev","~ret",{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"collect_letter":[{"temp=":"letter"},["ev",{"VAR?":"letter"},"str","^k","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","ev",true,"/ev",{"VAR=":"has_letter_k","re":true},"ev","str","^letter_k","/str",{"x()":"external_GiveItem","exArgs":1},"pop","/ev","\n","ev","str","^collect_letter: k","/str",{"x()":"debug_log","exArgs":1},"pop","/ev","\n",{"->":".^.^.^.5"},null]}],["ev",{"VAR?":"letter"},"str","^t","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","ev",true,"/ev",{"VAR=":"has_letter_t","re":true},"ev","str","^letter_t","/str",{"x()":"external_GiveItem","exArgs":1},"pop","/ev","\n","ev","str","^collect_letter: t","/str",{"x()":"debug_log","exArgs":1},"pop","/ev","\n",{"->":".^.^.^.5"},null]}],["ev",{"VAR?":"letter"},"str","^a","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","ev",true,"/ev",{"VAR=":"has_letter_a","re":true},"ev","str","^letter_a","/str",{"x()":"external_GiveItem","exArgs":1},"pop","/ev","\n","ev","str","^collect_letter: a","/str",{"x()":"debug_log","exArgs":1},"pop","/ev","\n",{"->":".^.^.^.5"},null]}],["ev",{"VAR?":"letter"},"str","^b","/str","==","/ev",{"->":".^.b","c":true},{"b":["\n","ev",true,"/ev",{"VAR=":"has_letter_b","re":true},"ev","str","^letter_b","/str",{"x()":"external_GiveItem","exArgs":1},"pop","/ev","\n","ev","str","^collect_letter: b","/str",{"x()":"debug_log","exArgs":1},"pop","/ev","\n",{"->":".^.^.^.5"},null]}],"nop","\n","ev","str","^collect_item","/str",{"x()":"external_PlaySound","exArgs":1},"pop","/ev","\n","ev",{"x()":"external_SaveProgress"},"pop","/ev","\n","ev","str","^collect_letter: finished (post-play/save)","/str",{"x()":"debug_log","exArgs":1},"pop","/ev","\n",{"#f":1}],"get_apple":["ev",true,"/ev",{"VAR=":"has_apple","re":true},"ev","str","^apple","/str",{"x()":"external_GiveItem","exArgs":1},"pop","/ev","\n","ev",{"x()":"external_SaveProgress"},"pop","/ev","\n","ev","str","^get_apple: given apple","/str",{"x()":"debug_log","exArgs":1},"pop","/ev","\n",{"#f":1}],"use_apple":[["ev",{"VAR?":"has_apple"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev",false,"/ev",{"VAR=":"has_apple","re":true},"ev","str","^use_apple: success","/str",{"x()":"debug_log","exArgs":1},"pop","/ev","\n","ev",true,"/ev","~ret",{"->":".^.^.^.2"},null]}],[{"->":".^.b"},{"b":["\n","ev","str","^use_apple: no apple to use","/str",{"x()":"debug_log","exArgs":1},"pop","/ev","\n","ev",false,"/ev","~ret",{"->":".^.^.^.2"},null]}],"nop","\n",{"#f":1}],"get_mission_status":[["ev",{"VAR?":"book_mission_completed"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^completed","/str","/ev","~ret",{"->":".^.^.^.4"},null]}],["ev",{"VAR?":"book_mission_started"},{"f()":"is_mission_complete"},"&&","/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^ready_to_complete","/str","/ev","~ret",{"->":".^.^.^.4"},null]}],["ev",{"VAR?":"book_mission_started"},"/ev",{"->":".^.b","c":true},{"b":["\n","ev","str","^in_progress","/str","/ev","~ret",{"->":".^.^.^.4"},null]}],[{"->":".^.b"},{"b":["\n","ev","str","^not_started","/str","/ev","~ret",{"->":".^.^.^.4"},null]}],"nop","\n",{"#f":1}],"debug_print_state":[["#","^speaker:نظام_تصحيح","/#","^حالة المهمة: ","ev",{"f()":"get_mission_status"},"out","/ev","\n","^الحروف:","\n",["^ك: ","ev",{"VAR?":"has_letter_k"},"out","/ev","\n",["^ت: ","ev",{"VAR?":"has_letter_t"},"out","/ev","\n",["^ا: ","ev",{"VAR?":"has_letter_a"},"out","/ev","\n",["^ب: ","ev",{"VAR?":"has_letter_b"},"out","/ev","\n","end",{"#f":5,"#n":"g-3"}],{"#f":5,"#n":"g-2"}],{"#f":5,"#n":"g-1"}],{"#f":5,"#n":"g-0"}],null],{"#f":1}],"global decl":["ev",false,{"VAR=":"book_mission_started"},false,{"VAR=":"book_mission_completed"},false,{"VAR=":"has_letter_k"},false,{"VAR=":"has_letter_t"},false,{"VAR=":"has_letter_a"},false,{"VAR=":"has_letter_b"},false,{"VAR=":"has_apple"},false,{"VAR=":"has_book"},false,{"VAR=":"talked_to_teacher"},false,{"VAR=":"talked_to_leila"},false,{"VAR=":"talked_to_vendor"},false,{"VAR=":"talked_to_librarian"},"/ev","end",null],"#f":1}],"listDefs":{}}